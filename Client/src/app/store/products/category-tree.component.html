<style>
    .example-tree-invisible {
        display: none;
    }

    .example-tree ul,
    .example-tree li {
        margin-top: 0;
        margin-bottom: 0;
        list-style-type: none;
    }
</style>

<mat-tree [dataSource]="nestedDataSource" [treeControl]="nestedTreeControl" class="example-tree">
    <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
        <li class="mat-tree-node">
            <button mat-icon-button disabled></button>
            <span>{{ node.cat.name }}</span>
            <button (click)="selectCategory(node.cat)">Select</button>
        </li>
    </mat-tree-node>

    <mat-nested-tree-node *matTreeNodeDef="let node; when: hasNestedChild">
        <li>
            <div class="mat-tree-node">
                <button mat-icon-button matTreeNodeToggle
                        [attr.aria-label]="'toggle ' + node.cat.name"></button>
                <mat-icon class="mat-icon-rtl-mirror">
                    <!-- {{ nestedTreeControl.isExpanded(node) ? 'expand_more' : 'chevron_right' }}-->
                </mat-icon>
                <span>{{ node.cat.name }}</span>
                <button (click)="selectCategory(node.cat)">Select</button>
            </div>
            <ul [class.example-tree-invisible]="!nestedTreeControl.isExpanded(node)">
                <ng-container matTreeNodeOutlet></ng-container>
            </ul>
        </li>
    </mat-nested-tree-node>
</mat-tree>
