<h1>Product detail</h1>
<br />
<br />
<br />
<div class="wrap rel">
    <br />
    <br />
    <div class="edit-prod">
        <div class="inline-block edit-btns" id="edit" *ngIf="!edit" (click)="editMode()"> Edit</div>
        <div class="inline-block edit-btns" id="save" *ngIf="edit" (click)="save()"> Save</div>
        <div class="inline-block edit-btns" id="discard" *ngIf="edit" (click)="discard()"> Discard</div>
        <div id="delete" class="edit-btns inline-block " (click)="deleteProduct()">Delete</div>
    </div>
    <br />
    <div class='container-fluid'>
        <div class='row'>
            <div class='col-lg-3 col-md-4 col-sm-6 col-xs-12 products'>
                <div class="prod-name">
                    <godsend-input-output *ngIf="data" [(ngModel)]="data.product.info.name" [edit]="edit"></godsend-input-output>
                </div>
                <div class="photo">
                    <div *ngFor="let image of images" style="display:contents;">
                        <img [src]="'data:image/jpg;base64,' + image" width="50%" />
                    </div>
                </div>
                <div class="rating">
                    <godsend-stars [readOnly]="!authenticated" [value]="data?.product?.info?.rating" (valueChanged)="saveRating($event)"></godsend-stars>
                    <p class="pull-right" [ngStyle]="{'color': '#003e09' }"><fa name="eye"></fa> : {{ data?.product?.info?.watches }}</p>
                </div>
            </div>
            <div class='col-lg-7 col-md-6 col-sm-5 col-xs-12 products rel'>
                <div class="prod-info">
                    <div>
                        <label>Description: </label>
                        <p><godsend-input-output *ngIf="data" [(ngModel)]="data.product.info.description" [edit]="edit" huge="true"></godsend-input-output></p>
                    </div>

                    <!-- PROPERTIES -->
                    <div *ngIf="data && data.decimalProps">
                        <div *ngFor="let dProp of data.decimalProps">
                            <label> {{ dProp.property.name }}</label>
                            <p> {{ dProp.value }} </p>
                        </div>
                    </div>

                    <div *ngIf="data && data.intProps">
                        <div *ngFor="let iProp of data.intProps">
                            <label> {{ iProp.property.name }}</label>
                            <p> {{ iProp.value }} </p>
                        </div>
                    </div>

                    <div *ngIf="data && data.stringProps">
                        <div *ngFor="let sProp of data.stringProps">
                            <label> {{ sProp.property.name }}</label>
                            <p> {{ sProp.value }} </p>
                        </div>
                    </div>


                    <!-- END PROPERTIES -->

                    <div *ngIf="data?.suppliers?.length > 0 else noSuppliers">
                        <label>Price: </label>
                        <p>
                            <span>From: </span>
                            <select [(ngModel)]="selectedSupplier" *ngIf="data != null">
                                <option *ngFor="let s of data?.suppliers" [ngValue]="s">{{ s.supplier?.info?.name }} for {{ s.price }}</option>
                            </select>
                        </p>
                        <p> For: {{ price }}</p>
                        <label>Quantity: </label>
                        <p><input id="input-quantity" type="number" min="1" step="1" [(ngModel)]="quantity" /></p>
                        <div class="buy" (click)="buy()">
                            <p class="inline-block"><fa name="cart-arrow-down"></fa></p>
                            <p class="inline-block">Buy!</p>
                        </div>
                    </div>
                    <ng-template #noSuppliers>
                        <label>No suppliers</label>
                    </ng-template>
                </div>
            </div>
        </div>
    </div>
    <div class="back-btn" (click)="gotoProducts(prod)">
        <fa name="long-arrow-left"></fa> Back to products
    </div>

</div>
